library(summarytools)
library(rio)
## Ver QUARTO RSTUDIO CONFERENCE: https://github.com/rstudio-conf-2022/get-started-quarto/blob/main/materials/02-authoring.qmd
##
## blackboard theme: https://github.com/schochastics/quarto-blackboard-theme
##
## https://github.com/schochastics/xaringan-themes
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = fct_reorder(hospital, n))) +
geom_col()
#| label: setup
#| include: false
library(fontawesome)
library(tidyverse)
library(quarto)
library(gt)
library(gtExtras)
library(gtsummary)
library(showtext)
library(kableExtra)
library(plotly)
library(haven)
library(Hmisc)
library(janitor)
library(summarytools)
library(rio)
## Ver QUARTO RSTUDIO CONFERENCE: https://github.com/rstudio-conf-2022/get-started-quarto/blob/main/materials/02-authoring.qmd
##
## blackboard theme: https://github.com/schochastics/quarto-blackboard-theme
##
## https://github.com/schochastics/xaringan-themes
ebola_data <- import("linelist_cleaned.rds")
ebola_data %>%
glimpse()
ebola_data %>%
tabyl(hospital)
ebola_data %>%
filter(hospital != "Missing") %>%
tabyl(hospital)
ebola_data %>%
ggplot(aes(x = hospital)) +
geom_bar()
ebola_data %>%
ggplot(aes(y = hospital)) +
geom_bar()
#| echo: false
datos_agregados <- data.frame(
nivel_dolor = c("Leve", "Moderado", "Severo"),
casos = c(234, 123, 21),
prevalencia = c(61.9, 32.5, 5.6)
)
datos_agregados
datos_agregados %>%
ggplot(aes(x = nivel_dolor, y = casos)) +
geom_col()
datos_agregados %>%
ggplot(aes(x = nivel_dolor, y = casos)) +
geom_col()
datos_agregados %>%
ggplot(aes(x = nivel_dolor, y = casos)) +
geom_bar(stat = "identity")
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = hospital)) +
geom_col()
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = hospital)) +
geom_bar(stat = "identity")
ebola_data %>%
mutate(
hospital = fct_relevel(hospital,
"St. Mark's Maternity Hospital (SMMH)",
"Port Hospital",
"Central Hospital",
"Military Hospital",
"Other",
"Missing")
) %>%
ggplot(aes(y = hospital)) +
geom_bar()
ebola_data %>%
mutate(
hospital = fct_relevel(hospital,
"St. Mark's Maternity Hospital (SMMH)", "Port Hospital",
"Central Hospital", "Military Hospital", "Other",
"Missing")
) %>%
ggplot(aes(y = hospital)) +
geom_bar() +
labs(x = "Frecuencia absoluta", y = "Hospitales") +
theme_bw()
ebola_data %>%
count(hospital)
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = 100 * n / sum(n))
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = 100 * n / sum(n)) %>%
ggplot(aes(x = hospital, y = porcentaje)) +
geom_bar(stat = "identity")
ebola_data %>%
ggplot(aes(x = hospital)) +
geom_bar(aes(y = (..count..)/sum(..count..)))
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = 100 * n / sum(n)) %>%
ggplot(aes(x = hospital, y = porcentaje)) +
geom_col()
ebola_data %>%
mutate(
hospital = fct_relevel(hospital,
"St. Mark's Maternity Hospital (SMMH)",
"Port Hospital",
"Central Hospital",
"Military Hospital",
"Other",
"Missing")
) %>%
count(hospital) %>%
mutate(porcentaje = 100 * n / sum(n)) %>%
ggplot(aes(x = hospital, y = porcentaje)) +
geom_col()
ebola_data %>%
ggplot(aes(x = fct_infreq(hospital))) +
geom_bar()
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = fct_reorder(hospital, n))) +
geom_col()
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = fct_reorder(hospital, n))) +
geom_col()
ebola_data %>%
group_by(hospital) %>%
count() %>%
ggplot(aes(x = n, y = fct_reorder(hospital, n))) +
geom_col() +
labs(x = "Frecuencia Absoluta",
y = "Hospital",
title = "Gráfico de barras")
ebola_data %>%
group_by(hospital) %>%
count() %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = n, y = fct_reorder(hospital, n))) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
group_by(hospital) %>%
count() %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje, y = fct_reorder(hospital, porcentaje))) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje, y = fct_reorder(hospital, porcentaje))) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje, y = fct_reorder(hospital, porcentaje), fill = hospital)) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola",
fill = "Hospital")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
labs(x = "Porcentaje (%)",
y = "Hospital",
title = "Distribución de hospitalizaciones de pacientes de Ébola",
fill = "Hospital")  +
theme(legend.position="none")
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col()
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
coord_polar(porcentaje)
ebola_data %>%
count(hospital) %>%
mutate(porcentaje = n / sum(n)) %>%
ggplot(aes(x = porcentaje,
y = fct_reorder(hospital, porcentaje),
fill = hospital)) +
geom_col() +
coord_polar("porcentaje")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = porcentaje,
fill = hospital)) +
geom_bar(stat = "identity") +
coord_polar("porcentaje")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity") +
coord_polar("porcentaje")
ebola_data %>%
count(hospital)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity") +
coord_polar("n")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity") +
coord_polar(n)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity") +
coord_polar("n", start = 0)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity", width=1)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "",
y = n,
fill = hospital)) +
geom_bar(stat = "identity", width = 1) +
coord_polar("y", start = 0)
ebola_data %>%
count(hospital) %>%
ggplot(aes(fill = hospital, y = n)) +
geom_bar(stat = "identity")
ebola_data %>%
count(hospital) %>%
ggplot(aes(fill = hospital, y = n, x = "")) +
geom_bar(stat = "identity")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity", position = "fill")
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity", width = 1) +
coord_polar("y", start = 0)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity", , position = "stack", width = 1) +
coord_polar("y", start = 0)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity", position = "stack", width = 1) +
coord_polar("y", start = 0)
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = "", y = n, fill = hospital)) +
geom_bar(stat = "identity", position = "fill", width = 1) +
coord_polar("y", start = 0)
## Lollipop plot
#| label: setup
#| include: false
library(fontawesome)
library(tidyverse)
library(quarto)
library(gt)
library(gtExtras)
library(gtsummary)
library(showtext)
library(kableExtra)
library(plotly)
library(haven)
library(Hmisc)
library(janitor)
library(summarytools)
library(rio)
library(treemap)
## Ver QUARTO RSTUDIO CONFERENCE: https://github.com/rstudio-conf-2022/get-started-quarto/blob/main/materials/02-authoring.qmd
##
## blackboard theme: https://github.com/schochastics/quarto-blackboard-theme
##
## https://github.com/schochastics/xaringan-themes
library(treemap)
ebola_data %>%
count(hospital) %>%
treemap(index = "hospital",
vSize = "n",
type = "index")
#| echo: false
knitr::include_graphics("img/r-gallery.png")
#| fig-align: center
ebola_data %>%
count(hospital) %>%
geom_segment(aes(x = hospital, xend = hospital, y = 0, y = n)) +
geom_point()
#| fig-align: center
ebola_data %>%
count(hospital)
#| fig-align: center
ebola_data %>%
count(hospital) %>%
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point() +
theme_minimal()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(size = 4) +
theme_minimal()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(size = 4) +
theme_minimal +
coord_flip()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(size = 4) +
theme_minimal() +
coord_flip()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_minimal() +
coord_flip()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_light() +
coord_flip()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_minimal() +
coord_flip()
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n)) +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_minimal() +
coord_flip() +
theme(
panel.grid.major.y = element_blank(),
panel.border = element_blank(),
axis.ticks.y = element_blank()
)
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n), color="skyblue") +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_minimal() +
coord_flip() +
theme(
panel.grid.major.y = element_blank(),
panel.border = element_blank(),
axis.ticks.y = element_blank()
)
#| fig-align: center
ebola_data %>%
count(hospital) %>%
ggplot(aes(x = hospital, y = n)) +
geom_segment(aes(x = hospital, xend = hospital, y = 0, yend = n), color="skyblue") +
geom_point(color = "blue", alpha = 0.6, size = 4) +
theme_light() +
coord_flip() +
theme(
panel.grid.major.y = element_blank(),
panel.border = element_blank(),
axis.ticks.y = element_blank()
)
#| label: setup
#| include: false
library(fontawesome)
library(tidyverse)
library(quarto)
library(gt)
library(gtExtras)
library(gtsummary)
library(showtext)
## Ver QUARTO RSTUDIO CONFERENCE: https://github.com/rstudio-conf-2022/get-started-quarto/blob/main/materials/02-authoring.qmd
##
## blackboard theme: https://github.com/schochastics/quarto-blackboard-theme
##
## https://github.com/schochastics/xaringan-themes
#| echo: false
set.seed(123145)
tinicio1 <- sample(0:5, 10, replace = T)
tinicio2 <- tinicio1 + sample(4:10, 10, replace = T)
linea_tiempo <- data.frame(
sujeto = factor(rep(1:10, 2)),
tinicio = c(tinicio1, tinicio2),
tfin = c(tinicio2, tinicio2 + sample(4:20, 10, replace = T)),
censor = sample(c("sin enfermedad X", "Con enfermedad X"), 20, replace = T)
) %>%
arrange(sujeto)
linea_tiempo %>%
ggplot() +
geom_point(aes(x = tfin, y = sujeto, shape = censor, color = censor)) +
geom_segment(aes(x = tinicio, xend = tfin, y = sujeto, yend = sujeto, color = censor)) +
scale_x_continuous(breaks = 0:29, limits = c(0, 29)) +
labs(y = "Sujeto", x = "Tiempo", shape = "Estado de salud", color = "Estado de salud") +
geom_vline(xintercept = 6, linetype = "dashed") +
geom_vline(xintercept = 17, linetype = "dashed") +
theme_bw()
