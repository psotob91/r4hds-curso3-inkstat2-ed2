{
  "hash": "ba8bb1b64d3d8d97af287a46aafd20a5",
  "result": {
    "markdown": "---\ntitle: \"Identificando tipos de Variables\"\n---\n\n\n## Introducción\n\nVamos a resolver una serie de ejercicios acerca de gráfocps de variables categóricas. Usaremos un conjunto de datos juguetes acerca de casos de pacientes con Ébola que se atendieron en hospitales de África. Estos datos están disponibles en el libro [The Epidemiologist Handbook](https://epirhandbook.com/en/index.html).\n\n## Cargar paquetes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)     # Esto carga {dplyr}, {ggplot2}, etc.\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n✔ ggplot2 3.3.6     ✔ purrr   0.3.4\n✔ tibble  3.1.8     ✔ dplyr   1.0.9\n✔ tidyr   1.2.0     ✔ stringr 1.4.0\n✔ readr   2.1.2     ✔ forcats 0.5.1\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(rio)           # Para importar todo tipo de datos\nlibrary(skimr)         # Exploración de datos\nlibrary(treemap)       # Gráfico de Treemap (mosaicos)\n```\n:::\n\n\n## Importar datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data <- import(\"linelist_cleaned.rds\")\n```\n:::\n\n\n## Análisis inicial de datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 5,888\nColumns: 30\n$ case_id              <chr> \"5fe599\", \"8689b7\", \"11f8ea\", \"b8812a\", \"893f25\",…\n$ generation           <dbl> 4, 4, 2, 3, 3, 3, 4, 4, 4, 4, 4, 4, 6, 5, 6, 9, 1…\n$ date_infection       <date> 2014-05-08, NA, NA, 2014-05-04, 2014-05-18, 2014…\n$ date_onset           <date> 2014-05-13, 2014-05-13, 2014-05-16, 2014-05-18, …\n$ date_hospitalisation <date> 2014-05-15, 2014-05-14, 2014-05-18, 2014-05-20, …\n$ date_outcome         <date> NA, 2014-05-18, 2014-05-30, NA, 2014-05-29, 2014…\n$ outcome              <chr> NA, \"Recover\", \"Recover\", NA, \"Recover\", \"Recover…\n$ gender               <chr> \"m\", \"f\", \"m\", \"f\", \"m\", \"f\", \"f\", \"f\", \"m\", \"f\",…\n$ age                  <dbl> 2, 3, 56, 18, 3, 16, 16, 0, 61, 27, 12, 42, 19, 7…\n$ age_unit             <chr> \"years\", \"years\", \"years\", \"years\", \"years\", \"yea…\n$ age_years            <dbl> 2, 3, 56, 18, 3, 16, 16, 0, 61, 27, 12, 42, 19, 7…\n$ age_cat              <fct> 0-4, 0-4, 50-69, 15-19, 0-4, 15-19, 15-19, 0-4, 5…\n$ age_cat5             <fct> 0-4, 0-4, 55-59, 15-19, 0-4, 15-19, 15-19, 0-4, 6…\n$ hospital             <chr> \"Other\", \"Missing\", \"St. Mark's Maternity Hospita…\n$ lon                  <dbl> -13.21574, -13.21523, -13.21291, -13.23637, -13.2…\n$ lat                  <dbl> 8.468973, 8.451719, 8.464817, 8.475476, 8.460824,…\n$ infector             <chr> \"f547d6\", NA, NA, \"f90f5f\", \"11f8ea\", \"aec8ec\", \"…\n$ source               <chr> \"other\", NA, NA, \"other\", \"other\", \"other\", \"othe…\n$ wt_kg                <dbl> 27, 25, 91, 41, 36, 56, 47, 0, 86, 69, 67, 84, 68…\n$ ht_cm                <dbl> 48, 59, 238, 135, 71, 116, 87, 11, 226, 174, 112,…\n$ ct_blood             <dbl> 22, 22, 21, 23, 23, 21, 21, 22, 22, 22, 22, 22, 2…\n$ fever                <chr> \"no\", NA, NA, \"no\", \"no\", \"no\", NA, \"no\", \"no\", \"…\n$ chills               <chr> \"no\", NA, NA, \"no\", \"no\", \"no\", NA, \"no\", \"no\", \"…\n$ cough                <chr> \"yes\", NA, NA, \"no\", \"yes\", \"yes\", NA, \"yes\", \"ye…\n$ aches                <chr> \"no\", NA, NA, \"no\", \"no\", \"no\", NA, \"no\", \"no\", \"…\n$ vomit                <chr> \"yes\", NA, NA, \"no\", \"yes\", \"yes\", NA, \"yes\", \"ye…\n$ temp                 <dbl> 36.8, 36.9, 36.9, 36.8, 36.9, 37.6, 37.3, 37.0, 3…\n$ time_admission       <chr> NA, \"09:36\", \"16:48\", \"11:22\", \"12:60\", \"14:13\", …\n$ bmi                  <dbl> 117.18750, 71.81844, 16.06525, 22.49657, 71.41440…\n$ days_onset_hosp      <dbl> 2, 1, 2, 2, 1, 1, 2, 1, 1, 2, 2, 2, 1, 0, 2, 0, 1…\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  skim()\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |5888       |\n|Number of columns        |30         |\n|_______________________  |           |\n|Column type frequency:   |           |\n|character                |13         |\n|Date                     |4          |\n|factor                   |2          |\n|numeric                  |11         |\n|________________________ |           |\n|Group variables          |None       |\n\n\n**Variable type: character**\n\n|skim_variable  | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:--------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|case_id        |         0|          1.00|   6|   6|     0|     5888|          0|\n|outcome        |      1323|          0.78|   5|   7|     0|        2|          0|\n|gender         |       278|          0.95|   1|   1|     0|        2|          0|\n|age_unit       |         0|          1.00|   5|   6|     0|        2|          0|\n|hospital       |         0|          1.00|   5|  36|     0|        6|          0|\n|infector       |      2088|          0.65|   6|   6|     0|     2697|          0|\n|source         |      2088|          0.65|   5|   7|     0|        2|          0|\n|fever          |       249|          0.96|   2|   3|     0|        2|          0|\n|chills         |       249|          0.96|   2|   3|     0|        2|          0|\n|cough          |       249|          0.96|   2|   3|     0|        2|          0|\n|aches          |       249|          0.96|   2|   3|     0|        2|          0|\n|vomit          |       249|          0.96|   2|   3|     0|        2|          0|\n|time_admission |       765|          0.87|   5|   5|     0|     1072|          0|\n\n\n**Variable type: Date**\n\n|skim_variable        | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:--------------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|date_infection       |      2087|          0.65|2014-03-19 |2015-04-27 |2014-10-11 |      359|\n|date_onset           |       256|          0.96|2014-04-07 |2015-04-30 |2014-10-23 |      367|\n|date_hospitalisation |         0|          1.00|2014-04-17 |2015-04-30 |2014-10-23 |      363|\n|date_outcome         |       936|          0.84|2014-04-19 |2015-06-04 |2014-11-01 |      371|\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts                                |\n|:-------------|---------:|-------------:|:-------|--------:|:-----------------------------------------|\n|age_cat       |        86|          0.99|FALSE   |        8|0-4: 1095, 5-9: 1095, 20-: 1073, 10-: 941 |\n|age_cat5      |        86|          0.99|FALSE   |       17|0-4: 1095, 5-9: 1095, 10-: 941, 15-: 743  |\n\n\n**Variable type: numeric**\n\n|skim_variable   | n_missing| complete_rate|   mean|    sd|       p0|    p25|    p50|    p75|    p100|hist  |\n|:---------------|---------:|-------------:|------:|-----:|--------:|------:|------:|------:|-------:|:-----|\n|generation      |         0|          1.00|  16.56|  5.79|     0.00|  13.00|  16.00|  20.00|   37.00|▁▆▇▂▁ |\n|age             |        86|          0.99|  16.07| 12.62|     0.00|   6.00|  13.00|  23.00|   84.00|▇▅▁▁▁ |\n|age_years       |        86|          0.99|  16.02| 12.64|     0.00|   6.00|  13.00|  23.00|   84.00|▇▅▁▁▁ |\n|lon             |         0|          1.00| -13.23|  0.02|   -13.27| -13.25| -13.23| -13.22|  -13.21|▅▃▃▆▇ |\n|lat             |         0|          1.00|   8.47|  0.01|     8.45|   8.46|   8.47|   8.48|    8.49|▅▇▇▇▆ |\n|wt_kg           |         0|          1.00|  52.64| 18.58|   -11.00|  41.00|  54.00|  66.00|  111.00|▁▃▇▅▁ |\n|ht_cm           |         0|          1.00| 124.96| 49.52|     4.00|  91.00| 129.00| 159.00|  295.00|▂▅▇▂▁ |\n|ct_blood        |         0|          1.00|  21.21|  1.69|    16.00|  20.00|  22.00|  22.00|   26.00|▁▃▇▃▁ |\n|temp            |       149|          0.97|  38.56|  0.98|    35.20|  38.20|  38.80|  39.20|   40.80|▁▂▂▇▁ |\n|bmi             |         0|          1.00|  46.89| 55.39| -1200.00|  24.56|  32.12|  50.01| 1250.00|▁▁▇▁▁ |\n|days_onset_hosp |       256|          0.96|   2.06|  2.26|     0.00|   1.00|   1.00|   3.00|   22.00|▇▁▁▁▁ |\n:::\n:::\n\n\n## Gráfico de barras de frecuencias absolutas\n\n- Inspeccionar hospital\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(ebola_data$hospital)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n                    Central Hospital                    Military Hospital \n                                 454                                  896 \n                             Missing                                Other \n                                1469                                  885 \n                       Port Hospital St. Mark's Maternity Hospital (SMMH) \n                                1762                                  422 \n```\n:::\n:::\n\n\n\n- Gráfico de barras de frecuencias absolutas para hospital\n\nBarra de FA vertical con geom_bar() - usamos datos individuales:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  ggplot(aes(x = hospital)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nBarra de FA horizontal con geom_bar() - usamos datos individuales:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  ggplot(aes(y = hospital)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nBarra de FA horizontal con geom_col() - usamos datos agrupados:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = hospital, x = n)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nBarra de FA vertical con geom_col() - usamos datos agrupados:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(x = hospital, y = n)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nBarra de FA horizontal con geom_bar(stat = \"identity\") - usamos datos agrupados:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) -> ebola_data_agregada\n\nebola_data_agregada\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                              hospital    n\n1                     Central Hospital  454\n2                    Military Hospital  896\n3                                Other  885\n4                        Port Hospital 1762\n5 St. Mark's Maternity Hospital (SMMH)  422\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data_agregada %>% \n  ggplot(aes(x = n, y = hospital)) + \n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n- Ordenar por orden arbitrario\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  mutate(hospital = fct_relevel(hospital, \n                                \"Military Hospital\", \"Central Hospital\", \n                                \"Port Hospital\", \n                                \"St. Mark's Maternity Hospital (SMMH)\", \n                                \"Other\")) %>% \n  count(hospital) -> ebola_data_reordenada\n\nebola_data_reordenada\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                              hospital    n\n1                    Military Hospital  896\n2                     Central Hospital  454\n3                        Port Hospital 1762\n4 St. Mark's Maternity Hospital (SMMH)  422\n5                                Other  885\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data_reordenada %>% \n  ggplot(aes(x = n, y = hospital)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nBonus extra: Si quiero invertir el orden: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data_reordenada %>% \n  ggplot(aes(x = n, y = fct_rev(hospital))) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n- Oderdar por orden de mayor a menor frecuencia\n\nSi datos son individuales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  ggplot(aes(y = fct_infreq(hospital))) + # Ojo: Tienen que ser datos individuales\n  geom_bar()         \n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nSi datos son individuales, pero al reves\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  ggplot(aes(y = fct_rev(fct_infreq(hospital)))) + # Ojo: Tienen que ser datos individuales\n  geom_bar()         \n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nSi datos son agregados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = fct_reorder(hospital, n), x = n)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nSi datos son agregados, pero al revés\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = fct_rev(fct_reorder(hospital, n)), x = n)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n- Personalizar gráfico\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = fct_rev(fct_reorder(hospital, n)), x = n)) + \n  geom_col() + \n  labs(x = \"Frecuencia absoluta\", \n       y = \"Hospitales\", \n       title = \"\", \n       caption = \"Fuente: Datos de Epihandbook.\") + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n- Colores diferentes para cada barra según variable hospital\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = fct_rev(fct_reorder(hospital, n)), x = n, fill = hospital)) + \n  geom_col() + \n  labs(x = \"Frecuencia absoluta\", \n       y = \"Hospitales\", \n       title = \"\", \n       caption = \"Fuente: Datos de Epihandbook.\") + \n  theme_bw() +                      # Configurar tema completo\n  theme(legend.position = \"none\")   # Quita leyenda\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n## Gráfico de barras de frecuencias relativas\n\nSolo con datos agrupados - geom_col(): \n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(y = hospital, x = porcentaje)) + \n  geom_col()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\nSolo con datos agrupados - geom_bar(stat = \"identity\"): \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(y = hospital, x = porcentaje)) + \n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\nSolo con datos  individuales - geom_bar(): \n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  ggplot(aes(y = hospital)) + \n  geom_bar(aes(x = (..count..)/sum(..count..))) + \n  labs(x = \"Porcentaje\", y = \"Hospital\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n- Personalizado\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(y = fct_rev(fct_reorder(hospital, porcentaje)), x = porcentaje, fill = hospital)) + \n  geom_col() + \n  labs(x = \"Porcentaje (%)\", \n       y = \"Hospitales\", \n       title = \"\", \n       caption = \"Fuente: Datos de Epihandbook.\") + \n  theme_bw() +                      # Configurar tema completo\n  theme(legend.position = \"none\")   # Quita leyenda\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n## Gráfico de barras apiladas\n\n- De frecuencias absolutas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(x = \"\", y = n, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"stack\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n- De frecuencias relativas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(x = \"\", y = n, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n- Extra bonus: otra opcion para frecuencias relativas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(x = \"\", y = porcentaje, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"stack\") \n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n- Personalizar\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(x = \"\", y = porcentaje, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"stack\") + \n  labs(x = \"\", y = \"Porcentaje (%)\", fill = \"Hospitales\") + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n\n## Otros gráficos\n\n### Gráfico de pái (pie)\n\n- De frecuencias absolutas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(x = \"\", y = n, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"stack\") +\n  coord_polar(\"y\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n- De frecuencias relativas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(x = \"\", y = n, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"fill\") +\n  coord_polar(\"y\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n- Personalizar\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  mutate(porcentaje = 100 * n / sum(n)) %>% \n  ggplot(aes(x = \"\", y = porcentaje, fill = hospital)) + \n  geom_bar(stat = \"identity\", position = \"stack\") + \n  coord_polar(\"y\") + \n  labs(x = \"\", y = \"Porcentaje (%)\", fill = \"Hospitales\") + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n### Gráfico de lollipop \n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = hospital, x = n)) + \n  geom_point() + \n  geom_segment(aes(y = hospital, yend = hospital, x = 0, xend = n)) \n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n- Personalizar\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  ggplot(aes(y = hospital, x = n)) + \n  geom_segment(aes(y = hospital, yend = hospital, x = 0, xend = n), \n               color = \"blue\") +\n  geom_point(color = \"skyblue\", size = 5) + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n\n### Treemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\nebola_data %>% \n  filter(hospital != \"Missing\") %>% \n  count(hospital) %>% \n  treemap(index = \"hospital\", \n          vSize = \"n\", \n          type = \"index\")\n```\n\n::: {.cell-output-display}\n![](var_cat_graficos_taller_solucionario_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "var_cat_graficos_taller_solucionario_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}